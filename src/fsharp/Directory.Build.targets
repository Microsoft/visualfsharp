<Project>
  <Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.targets', '$(MSBuildThisFileDirectory)../'))" />
  <Import Project="..\buildtools\buildtools.targets" />

  <!--  Proto Build use package or compiler fsharp.core -->
  <ItemGroup Condition="'$(Configuration)' == 'Proto'">
    <!-- When building building locally we go to nuget and use the Version number that matches the LKG tools in use -->
    <PackageReference Include="FSharp.Core" Version="$(FSharpCoreImplicitPackageVersion)" Condition="'$(DotNetBuildFromSource)' != 'true' or '$(FSharpSourceBuild)' != 'true'" />

    <!-- When building building from source we use the fsharp.core alongside the compiler.  Frankly this is awfull -->
    <Reference Include="FSharp.Core" Condition="'$(DotNetBuildFromSource)' == 'true' and '$(FSharpSourceBuild)' == 'true'">
        <HintPath>$(_DotNetRoot)sdk\$(NETCoreSdkVersion)\FSharp\FSharp.Core.dll</HintPath>
    </Reference>
  </ItemGroup>

</Project>
